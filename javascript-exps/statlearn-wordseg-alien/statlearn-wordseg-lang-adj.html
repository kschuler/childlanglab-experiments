<!DOCTYPE html>
<html>
    <head>
        <title>Stat Learn SRT Task</title>

        <!-- libraries required for jsPsych plugins -->
        <script src="static/js/jspsych-6.0.2/jspsych.js"></script>
        <script src="static/js/jspsych-6.0.2/plugins/jspsych-instructions.js"></script>
        <script src="static/js/jspsych-6.0.2/plugins/jspsych-image-keyboard-response.js"></script>

        <!-- libraries required for YAML parsing -->
        <!-- <script src="static/js/yaml.js" type="text/javascript"></script> -->


        <!-- css stylesheets for making everything pretty-->
        <link href="static/js/jspsych-6.0.2/css/jspsych.css" rel="stylesheet" type="text/css"></link>

    </head>

    <!-- the body - this is where the experiment gets displayed-->
    <body>

    </body>

    <!-- the javascript that runs the experiment-->
    <script>

    /* load the parameter file as object and save in variable*/
    // var PARAMS = YAML.load('params.yaml')

    // setup subject data
    jsPsych.data.addProperties({
      // psiturk_mode: mode,
      // subject: uniqueId,
      // params: PARAMS,
      condition: "No seperate condition"
    });

    // we will use the input from saffran, aslin, newport (baby saffran)
    // each syllable will correspond to an image
    // subjects will be instructed to track 2 images (randomly selected)
    // one within a word and one at a word bounta

    // jsPsych.pluginAPI.preloadImages(PARAMS.experiment_wide.images_to_preload,
    //   function(){
    //     startExperiment(); },
    //   function(nLoaded) {
    //     updateLoadedCount(nLoaded); }
    //   );
    //
    // function updateLoadedCount(nLoaded){
    //     var percentcomplete = nLoaded / PARAMS.experiment_wide.images_to_preload.length * 100;
    //     // could put something fancier here, like a progress bar
    //     // or updating text in the DOM.
    //     console.log('Loaded '+percentcomplete+'% of images');
    // }

    var hello_trial = {
        type: 'instructions',
        pages: ['Help Andy pack his toys.',
                'When you see the car, press 1; when you see the phone, press 2'],
        show_clickable_nav: true
    }

    var exposure_trials = {
        type: 'image-keyboard-response',
        choices: ['1','2'],
        trial_duration: 1000,
        response_ends_trial: false,
        repetitions: 3,
        timeline: [
            {stimulus: 'stims/rc.jpg', data: {correct_response: "1"}},
            {stimulus: 'stims/phone.jpg', data: {correct_response: "2"}},
            {stimulus: 'stims/lenny.png', data: {correct_response: "null"}},
            {stimulus: 'stims/army.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/bopeep.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/buzzlightyear.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/dino.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/martian.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/woody.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/pig.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/potatohead.jpg', data: {correct_response: "null"}},
            {stimulus: 'stims/teddy.jpg', data: {correct_response: "null"}}
        ]
    }

    jsPsych.init({
        // fullscreen: PARAMS.experiment_wide.fullscreen,
        // show_progress_bar: PARAMS.experiment_wide.show_progress_bar,
        timeline: [hello_trial, exposure_trials],
        show_progress_bar: true,
        on_finish: function(){jsPsych.data.displayData();}
    });


    // /* start the experiment */
    // function startExperiment(){
    //     jsPsych.init({
    //         display_element: $('#jspsych-target'),
    //         fullscreen: PARAMS.experiment_wide.fullscreen,
    //         show_progress_bar: PARAMS.experiment_wide.show_progress_bar,
    //         timeline: [hello_trial],
    //         on_finish: function(){jsPsych.data.displayData();}
    //         // on_finish: function() {
    //         //     psiturk.saveData({
    //         //         success: function() { psiturk.completeHIT(); }
    //         //     });
    //         // },
    //         // on_data_update: function(data) {
    //         //     psiturk.recordTrialData(data);
    //         // }
    //     });
    // }

    </script>
</html>
